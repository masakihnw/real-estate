---
description: 実装・スクレイピング変更時に docs/SPECIFICATION.md を必ず更新する絶対ルール
alwaysApply: true
---

# 仕様書同期ルール（絶対遵守）

## ルール

実装コード（iOS アプリ・スクレイピングツール）に変更を加えた場合、**必ず `docs/SPECIFICATION.md` を同じターン内で更新すること**。これは例外なしの絶対ルールである。

## 対象となる変更

以下のいずれかに該当する変更を行った場合、仕様書への追従が必須：

- **iOS アプリ** (`real-estate-ios/` 配下)
  - モデル・データ構造の追加・変更・削除
  - 画面・ビューの追加・変更・削除
  - サービス・ロジックの追加・変更・削除
  - 新規ファイルの追加
  - project.yml や Info.plist の設定変更

- **スクレイピングツール** (`scraping-tool/` 配下)
  - スクレイピング対象・ロジックの変更
  - データ処理パイプラインの変更
  - 出力フォーマット・フィールドの変更
  - 新規スクリプトの追加
  - 依存パッケージの追加・変更

- **Firebase / インフラ**
  - Firestore ルール・構造の変更
  - GitHub Actions ワークフローの変更
  - firebase.json / storage.rules の変更

## 更新手順

1. 実装変更を完了する
2. `docs/SPECIFICATION.md` を Read ツールで読み込む
3. 変更内容に対応するセクションを特定する
4. 該当セクションを変更内容に合わせて更新する
5. 冒頭の `最終更新` 日付を当日に更新する

## 更新内容の基準

- **追加**: 新機能・新フィールド・新スクリプトは仕様書に記載を追加
- **変更**: 既存機能の動作変更はその記述を修正
- **削除**: 廃止された機能・フィールドは仕様書から削除
- 変更の意図・背景がわかるように記述すること

## 禁止事項

- 実装を変更して仕様書を更新せずにターンを終了すること
- 「後で更新する」として仕様書更新を先送りすること
- 仕様書の更新を別のコミットに分けること（同一コミットに含める）
