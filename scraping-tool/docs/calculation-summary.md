# 10年後の値上がり率と資産性の試算の仕方（わかりやすい説明）

レポートに表示される「10年後の推定価格」「騰落率」「資産性ランク（S/A/B/C）」「推定含み益」が、どのように計算されているかを簡潔にまとめます。

**2026年1月時点**の経済予測（日銀利上げ・賃料急騰・建築費高騰）に基づく **3つの未来シナリオ**（楽観・中立・悲観）で、収益還元法と原価法のハイブリッドにより10年後価格を算出しています。

---

## 共通の前提

- **現在の推定成約価格**  
  掲載価格（売り出し価格）に「売り出し→成約」の補正（約96%）をかけた値。**この価格で購入したとみなして**10年後を試算します。
- **ローン前提**  
  **50年変動金利・金利1%**として、頭金ゼロで借り入れたときの10年後のローン残高を計算します（含み益・資産性・レポート月額表示とも共通）。
- **10年後の価格**  
  **中立（neutral）シナリオ**を Standard として騰落率・含み益・資産性を出します。楽観＝Best、悲観＝Worst は参考表示用です。

---

## 1. 10年後の値上がり率（騰落率）の試算

### 何を表しているか

「**今の推定成約価格**」と「**10年後のStandard予測価格**」を比べて、**何% 増えた／減ったか**を百分率で表したものです。

### 計算式

```
騰落率（%） = ( 10年後Standard価格 ÷ 現在の推定成約価格 − 1 ) × 100
```

- **プラス**（例: +5.2%）→ 10年後に価格が上がる見込み  
- **マイナス**（例: -8.6%）→ 10年後に価格が下がる見込み  

レポートの「騰落: -8.6%」などは、この計算結果をそのまま表示しています。

### 10年後価格はどう決まるか（FutureEstatePredictor）

`future_estate_predictor.py` の **FutureEstatePredictor** で、次の2つのアプローチを計算し、**高い方**を採用します（市場は高い方の論理で動くため）。

#### (A) 収益還元法（インカム）

将来の家賃と金利から理論価格を算出します。

- **式**: `Price_10y = (現行賃料×12 × (1+R_rent)^10) / (CapRate_base + (R_interest × β_area))`
- **R_rent**: シナリオの家賃上昇率 × エリア係数（S=1.2倍, A=1.0, B=0.9, C=0.8）。区ごとの賃料転嫁力は `data/ward_potential.csv` の `rent_growth_potential` で定義。
- **R_interest**: シナリオの10年後金利 − 現在金利（1%）。金利が上がるとキャップレートが上がり価格は下がる。
- **β_area**: エリアの金利感応度（都心0.8、郊外1.2）。

現行賃料が未入力の場合は、成約推定価格×キャップレート（都心3.5%／準都心4%／郊外4.5%）から逆算します。

#### (B) 原価法（コスト）

建築費高騰により建物価値が下がらない現象を再現します。

- **式**: `Price_10y = (土地価格×1.05) + (建物価格×(1−減価)×(1+R_const)^10)`
- **R_const**: シナリオの建築費上昇率。土地65%・建物35%で按分。築浅（築10年以内）かつ大規模（200戸以上）の場合は減価を実質ゼロに補正。
- 区ごとの **供給制約**（`ward_potential.csv` の `supply_constraint`）を乗じ、新築供給が少ないエリアほど中古価格を維持。

#### (C) 2026年市場補正

算出価格に以下の補正を適用します。

1. **15分ずらしボーナス +5%**: 江東区・墨田区・品川区など都心へ15分かつ駅徒歩5分以内。
2. **在庫調整ペナルティ -5%**: 都心3区（港・中央・千代田）かつ1.5億円以上の物件。
3. **省エネ・リノベ優遇 +2%**: 築古でも ZEH・リノベ済などフラグがあれば住宅ローン控除拡充を反映。

#### 3シナリオのデフォルト（2026年予測ベース）

| シナリオ | 家賃上昇率 | 10年後金利 | 建築費上昇率 | レポート対応 |
|----------|------------|------------|--------------|--------------|
| **楽観 (optimistic)** | 年4% | 1.5% | 年5% | Best |
| **中立 (neutral)**   | 年2% | 2.5% | 年3% | Standard |
| **悲観 (pessimistic)** | 年0.5% | 4% | 年1% | Worst |

ユーザーは `FutureEstatePredictor(macro_scenarios={...})` でこれらの数値を差し替え可能です。詳細は `future_estate_predictor.py` を参照してください。

---

## 2. 資産性ランク（S/A/B/C）の試算

### 何を表しているか

「**10年後にローンを返したあと、どれだけプラス（含み益）が残るか**」を比率（含み益率）で表し、その大きさで **S / A / B / C** の4段階に分けています。

### 計算の流れ（2ステップ）

#### ステップ1: 含み益と含み益率を求める

- **10年後のローン残高**  
  現在の推定成約価格を、50年・金利1%・元利均等・頭金ゼロで借りたときの「10年後時点の残債」  
- **含み益（円）**  
  `10年後Standard価格 − 10年後ローン残高`  
  → 10年後に売却した場合、ローンを返したあとに残る金額（マイナスならオーバーローン）  
- **含み益率（%）**  
  `含み益 ÷ 現在の推定成約価格 × 100`  
  → 購入価格に対する「儲かり度」の割合  

#### ステップ2: 含み益率でランクを決める

| 含み益率 | 資産性ランク | 意味 |
|----------|--------------|------|
| **10%以上** | **S** | 購入価格の1割以上が含み益になる見込み |
| **5%以上 10%未満** | **A** | 5〜10%程度の含み益が見込める |
| **0%以上 5%未満** | **B** | 含み益は少ないが、オーバーローンではない見込み |
| **0%未満** | **C** | 10年後時点でローン残高が時価を上回る可能性（オーバーローン） |

レポートの「資産性根拠: 含み益率+20.3%」のように、**含み益率がそのまま根拠**として表示されます。

### 式のまとめ

```
現在の推定成約価格 = 掲載価格 × 成約補正（FutureEstatePredictor の current_valuation）
10年後Standard価格   = 収益還元法と原価法の高い方 ＋ 2026年市場補正（中立シナリオ）
10年後ローン残高     = 成約価格を50年・1%・元利均等で借りたときの10年後残債

含み益（円） = 10年後Standard価格 − 10年後ローン残高
含み益率（%） = 含み益 ÷ 現在の推定成約価格 × 100

資産性ランク = 含み益率で S(≥10%) / A(≥5%) / B(≥0%) / C(<0%)
```

---

## 3. レポート上の表示との対応

| レポートの表示 | 中身 |
|----------------|------|
| **10年後の推定価格** | 10年後Standard価格（万円表示） |
| **騰落率**（例: 騰落:-8.6%） | `(10年後Standard価格 ÷ 現在成約価格 − 1) × 100` |
| **推定含み益**（例: +1349万円） | `10年後Standard価格 − 10年後ローン残高`（万円） |
| **資産性(S/A/B/C)** | 含み益率によるランク（S≥10%, A≥5%, B≥0%, C<0%） |
| **資産性根拠**（例: 含み益率+20.3%） | 上記の含み益率（%） |

騰落率も資産性も、**同じ「現在の推定成約価格」と「10年後Standard（中立）価格」**から計算されており、ロジックは `future_estate_predictor` を `price_predictor` 経由で利用し、`asset_score` と共通化されています。

---

## 4. 参考: 3シナリオ（Standard / Best / Worst）

- **Standard**  
  上記の騰落率・含み益・資産性は、すべて **中立（neutral）** シナリオ（年2%賃料上昇・10年後金利2.5%・建築費年3%）で計算しています。
- **Best / Worst**  
  **楽観（optimistic）**／**悲観（pessimistic）** シナリオに相当。賃料・金利・建築費の前提が異なり、資産性ランクや「騰落」「含み益」の数値には使わず、**参考**として表にのみ表示しています。

詳細は `future_estate_predictor.py` と `price_predictor.py` を参照してください。

**実装上の補足**: レポート（generate_report）とSlack通知（slack_notify）は、3シナリオ表示を **optional_features.get_three_scenario_columns** 経由で取得しています。price_predictor が未インストールの場合は "-" を表示します。
